"use strict";(self.webpackChunkdiabetes=self.webpackChunkdiabetes||[]).push([[4654],{4654:(k,f,u)=>{u.r(f),u.d(f,{SelfcareModule:()=>g});var p=u(6814),E=u(4190),m=u(5861),U=u(685),S=u(553),t=u(5879),b=u(2956),i=u(6242);const A=[{path:"",component:(()=>{class n{constructor(c,a,s,o){this.authService=c,this.router=a,this.cdf=s,this.localStorageService=o,this.routes=U._,this.isClassAdded=[!1]}ngOnInit(){this.authService.checkUserUUID(),this.user_fullname=this.authService.checkUserFullName(),this.user_status=this.authService.checkUserStatusPatient(),this.user_host=this.authService.checkUserHospital()}ngAfterViewInit(){var c=this;return(0,m.Z)(function*(){const a=yield c.localStorageService.getItem("status-diabetes-fbs");console.log("user_status_diabetes",a);const s=document.querySelector(".image-container");s&&("green"===a?s.style.backgroundColor="green":"yellow"===a?s.style.backgroundColor="yellow":"orange"===a?s.style.backgroundColor="orange":"red"===a&&(s.style.backgroundColor="red"))})()}toggleClass(c){this.isClassAdded[c]=!this.isClassAdded[c]}logout(){localStorage.removeItem(S.N.USERDATA_KEY),this.router.navigate(["home"])}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(b.e),t.Y36(E.F0),t.Y36(t.sBO),t.Y36(i.n))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-selfcare"]],decls:75,vars:11,consts:[[1,"breadcrumb-bar-two"],[1,"container"],[1,"row","align-items-center","inner-banner"],[1,"col-md-12","col-12","text-center"],[1,"breadcrumb-title"],["aria-label","breadcrumb",1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item"],[1,"content"],[1,"row"],[1,"col-md-5","col-lg-4","col-xl-3"],[1,"stickybar"],[1,"profile-sidebar"],[1,"widget-profile","pro-widget-content"],[1,"profile-info-widget"],["href","javascript:void(0)",1,"booking-doc-img"],[1,"image-container"],["src","assets/img/patients/user.png","alt","User Image"],[1,"profile-det-info"],[2,"color","rgb(83, 83, 83)"],[1,"patient-details"],[1,"dashboard-widget"],[1,"dashboard-menu"],[1,"fas","fa-columns"],[1,"fas","fa-bookmark"],[1,"fas","fa-users"],[1,"active"],[1,"fas","fa-comments"],[1,"fas","fa-file-invoice-dollar"],[1,"fas","fa-list-alt"],[3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(a,s){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5,"\u0e41\u0e1c\u0e19\u0e14\u0e39\u0e41\u0e25\u0e15\u0e19\u0e40\u0e2d\u0e07"),t.qZA(),t.TgZ(6,"nav",5)(7,"ol",6)(8,"li",7)(9,"a",8),t._uU(10,"\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e23\u0e01"),t.qZA()(),t.TgZ(11,"li",9),t._uU(12,"\u0e41\u0e1c\u0e19\u0e14\u0e39\u0e41\u0e25\u0e15\u0e19\u0e40\u0e2d\u0e07"),t.qZA()()()()()()(),t.TgZ(13,"div",10)(14,"div",1)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"a",17)(22,"div",18),t._UZ(23,"img",19),t.qZA()(),t.TgZ(24,"div",20)(25,"h3"),t._uU(26),t.qZA(),t.TgZ(27,"h5",21),t._uU(28),t.qZA(),t.TgZ(29,"h5",21),t._uU(30),t.qZA(),t._UZ(31,"div",22),t.qZA()()(),t.TgZ(32,"div",23)(33,"nav",24)(34,"ul")(35,"li")(36,"a",8),t._UZ(37,"i",25),t.TgZ(38,"span"),t._uU(39,"\u0e2a\u0e21\u0e38\u0e14\u0e1b\u0e23\u0e30\u0e08\u0e33\u0e15\u0e31\u0e27\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22"),t.qZA()()(),t.TgZ(40,"li")(41,"a",8),t._UZ(42,"i",26),t.TgZ(43,"span"),t._uU(44,"\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e19\u0e49\u0e33\u0e15\u0e32\u0e25"),t.qZA()()(),t.TgZ(45,"li")(46,"a",8),t._UZ(47,"i",27),t.TgZ(48,"span"),t._uU(49,"\u0e42\u0e20\u0e0a\u0e19\u0e32\u0e01\u0e32\u0e23\u0e02\u0e2d\u0e07\u0e09\u0e31\u0e19"),t.qZA()()(),t.TgZ(50,"li",28)(51,"a",8),t._UZ(52,"i",29),t.TgZ(53,"span"),t._uU(54,"\u0e41\u0e1c\u0e19\u0e14\u0e39\u0e41\u0e25\u0e15\u0e19\u0e40\u0e2d\u0e07"),t.qZA()()(),t.TgZ(55,"li")(56,"a",8),t._UZ(57,"i",30),t.TgZ(58,"span"),t._uU(59,"\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e17\u0e4c\u0e02\u0e2d\u0e07\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22"),t.qZA()()(),t.TgZ(60,"li")(61,"a",8),t._UZ(62,"i",31),t.TgZ(63,"span"),t._uU(64,"\u0e04\u0e33\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e17\u0e32\u0e07\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e17\u0e22\u0e4c"),t.qZA()()(),t.TgZ(65,"li")(66,"a",8),t._UZ(67,"i",29),t.TgZ(68,"span"),t._uU(69,"\u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19"),t.qZA()()(),t.TgZ(70,"li")(71,"a",32),t.NdJ("click",function(){return s.logout()}),t._UZ(72,"i",33),t.TgZ(73,"span"),t._uU(74,"Logout"),t.qZA()()()()()()()()()()()()),2&a&&(t.xp6(9),t.Q6J("routerLink",s.routes.home),t.xp6(17),t.hij("\u0e0a\u0e37\u0e48\u0e2d : ",s.user_fullname,""),t.xp6(2),t.hij("\u0e2a\u0e16\u0e32\u0e19\u0e30 : ",s.user_status,""),t.xp6(2),t.hij("\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22\u0e42\u0e23\u0e07\u0e1e\u0e22\u0e32\u0e1a\u0e32\u0e25 : ",s.user_host,""),t.xp6(6),t.Q6J("routerLink",s.routes.patientDashboard),t.xp6(5),t.Q6J("routerLink",s.routes.patientDiabetes),t.xp6(5),t.Q6J("routerLink",s.routes.patientNutrition),t.xp6(5),t.Q6J("routerLink",s.routes.patientSelfcare),t.xp6(5),t.Q6J("routerLink",s.routes.patientHistory),t.xp6(5),t.Q6J("routerLink",s.routes.patientMedicalterm),t.xp6(5),t.Q6J("routerLink",s.routes.patientPredict))},dependencies:[E.rH],styles:[".image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:150px;height:150px;border-radius:50%}"]})}return n})()}];let Z=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#r=this.\u0275inj=t.cJS({imports:[E.Bz.forChild(A),E.Bz]})}return n})(),g=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#r=this.\u0275inj=t.cJS({imports:[p.ez,Z]})}return n})()},2956:(k,f,u)=>{u.d(f,{e:()=>s});var p=u(5619),E=u(2096),m=u(7398),U=u(4664),S=u(6306),t=u(4716),b=u(553);class i extends Error{}i.prototype.name="InvalidTokenError";var g=u(5879),n=u(9862);const T=`${b.N.apiUrl}/auth`;let c=(()=>{class o{constructor(e){this.http=e}login(e,r){return this.http.post(`${T}/login`,{username:e,password:r})}getUserByToken(e){const r=new n.WM({Authorization:`Bearer ${e}`});return this.http.get(`${T}/profile`,{headers:r})}static#t=this.\u0275fac=function(r){return new(r||o)(g.LFG(n.eN))};static#e=this.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var a=u(4190);let s=(()=>{class o{get currentUserValue(){return this.currentUserSubject.value}set currentUserValue(e){this.currentUserSubject.next(e)}constructor(e,r){this.authHttpService=e,this.router=r,this.unsubscribe=[],this.authLocalStorageToken=`${b.N.USERDATA_KEY}`,this.isLoadingSubject=new p.X(!1),this.currentUserSubject=new p.X(void 0),this.currentUser$=this.currentUserSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable();const d=this.getUserByToken().subscribe();this.unsubscribe.push(d)}login(e,r){return this.isLoadingSubject.next(!0),this.authHttpService.login(e,r).pipe((0,m.U)(d=>{const v=this.setAuthFromLocalStorage(d);return console.log("auth",d),console.log("login status",v),v}),(0,U.w)(()=>this.getUserByToken()),(0,S.K)(d=>(console.error("err",d),(0,E.of)(void 0))),(0,t.x)(()=>this.isLoadingSubject.next(!1)))}logout(){localStorage.removeItem(this.authLocalStorageToken),this.router.navigate(["/auth/login"],{queryParams:{}})}getUserByToken(){const e=this.getAuthFromLocalStorage();return e&&e.access_token?(this.isLoadingSubject.next(!0),this.authHttpService.getUserByToken(e.access_token).pipe((0,m.U)(r=>(r?this.currentUserSubject.next(r):this.logout(),r)),(0,t.x)(()=>this.isLoadingSubject.next(!1)))):(0,E.of)(void 0)}setAuthFromLocalStorage(e){return!(!e||!e.access_token||(localStorage.setItem(this.authLocalStorageToken,JSON.stringify(e)),0))}getAuthFromLocalStorage(){try{const e=localStorage.getItem(this.authLocalStorageToken);return e?JSON.parse(e):void 0}catch(e){return void console.error(e)}}checkUserUUID(){var r=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(r).user_uuid}checkUserFullName(){var r=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(r).username}checkUserStatusPatient(){var r=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(r).status_patient}checkUserHospital(){var r=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(r).hospital_name}getDecodedAccessToken(e){try{return function Z(o,l){if("string"!=typeof o)throw new i("Invalid token specified: must be a string");l||(l={});const e=!0===l.header?0:1,r=o.split(".")[e];if("string"!=typeof r)throw new i(`Invalid token specified: missing part #${e+1}`);let d;try{d=function A(o){let l=o.replace(/-/g,"+").replace(/_/g,"/");switch(l.length%4){case 0:break;case 2:l+="==";break;case 3:l+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function h(o){return decodeURIComponent(atob(o).replace(/(.)/g,(l,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(l)}catch{return atob(l)}}(r)}catch(v){throw new i(`Invalid token specified: invalid base64 for part #${e+1} (${v.message})`)}try{return JSON.parse(d)}catch(v){throw new i(`Invalid token specified: invalid json for part #${e+1} (${v.message})`)}}(e)}catch{return null}}ngOnDestroy(){this.unsubscribe.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(r){return new(r||o)(g.LFG(c),g.LFG(a.F0))};static#e=this.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},6242:(k,f,u)=>{u.d(f,{n:()=>S});var p=u(2438),E=u(3019),m=u(7398),U=u(5879);let S=(()=>{class t{constructor(){const i=(0,p.R)(window,"status-diabetes-fbs").pipe((0,m.U)(h=>({key:h.key,newValue:h.newValue})));this.storage$=(0,E.T)(i)}getStorageObservable(){return this.storage$}setItem(i,h){localStorage.setItem(i,h)}getItem(i){return localStorage.getItem(i)}removeItem(i){localStorage.removeItem(i)}static#t=this.\u0275fac=function(h){return new(h||t)};static#e=this.\u0275prov=U.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);