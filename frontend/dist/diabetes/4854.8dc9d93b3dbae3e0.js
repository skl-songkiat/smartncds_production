"use strict";(self.webpackChunkdiabetes=self.webpackChunkdiabetes||[]).push([[4854],{4854:(I,v,s)=>{s.r(v),s.d(v,{PredictModule:()=>G});var m=s(6814),c=s(4190),A=s(5861),U=s(685),f=s(553),l=s(6223),d=s(3807);class E{}var e=s(5879),_=s(8610),k=s(2956),b=s(5619),S=s(7398),T=s(4716),C=s(9862);const y="http://202.151.176.129:8000";let P=(()=>{class n{constructor(t){this.http=t}postClassifyImage(t){const i=new FormData;return i.append("file",t),this.http.post(y+"/classify/",i)}postPredictNumeric(t){return this.http.post(y+"/predict/",t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(C.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a=(()=>{class n{constructor(t,i,r){this.DiabetesRecordHttpService=t,this.authService=i,this.router=r,this.unsubscribe=[],this.isLoadingSubject=new b.X(!1),this.currentDiabetesRecordSubject=new b.X(void 0),this.currentDiabetesRecord$=this.currentDiabetesRecordSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable()}postClassifyImage(t){return this.isLoadingSubject.next(!0),this.DiabetesRecordHttpService.postClassifyImage(t).pipe((0,S.U)(i=>(i&&this.currentDiabetesRecordSubject.next(i),i)),(0,T.x)(()=>this.isLoadingSubject.next(!1)))}postPredictNumeric(t){return this.isLoadingSubject.next(!0),this.DiabetesRecordHttpService.postPredictNumeric(t).pipe((0,S.U)(i=>(i&&this.currentDiabetesRecordSubject.next(i),i)),(0,T.x)(()=>this.isLoadingSubject.next(!1)))}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(P),e.LFG(k.e),e.LFG(c.F0))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=s(6242),u=s(3305);function o(n,x){if(1&n&&e._UZ(0,"img",62),2&n){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function g(n,x){if(1&n&&(e.TgZ(0,"div")(1,"section",63),e._uU(2," File details: "),e.TgZ(3,"ul")(4,"li"),e._uU(5),e.qZA(),e.TgZ(6,"li"),e._uU(7),e.qZA(),e.TgZ(8,"li"),e._uU(9),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(5),e.hij("Name: ",t.file.name,""),e.xp6(2),e.hij("Type: ",t.file.type,""),e.xp6(2),e.hij("Size: ",t.file.size," bytes")}}function Z(n,x){if(1&n&&(e.TgZ(0,"div")(1,"h1"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("\u0e1c\u0e25\u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e42\u0e23\u0e04 \u0e04\u0e37\u0e2d ",t.predict_display,"")}}function N(n,x){if(1&n&&(e.TgZ(0,"div")(1,"h1"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("\u0e1c\u0e25\u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e42\u0e23\u0e04 \u0e04\u0e37\u0e2d ",t.predict_display_numeric,"")}}const L=[{path:"",component:(()=>{class n{constructor(t,i,r,p,D,J){this.toastService=t,this.authService=i,this.predictService=r,this.router=p,this.cdf=D,this.localStorageService=J,this.routes=U._,this.isClassAdded=[!1],this.panelOpenState=!1,this.status="initial",this.file=null,this.Pregnancies="",this.Glucose="",this.BloodPressure="",this.SkinThickness="",this.Insulin="",this.BMI="",this.DiabetesPedigreeFunction="",this.Age=""}ngOnInit(){this.authService.checkUserUUID(),this.user_fullname=this.authService.checkUserFullName(),this.user_status=this.authService.checkUserStatusPatient(),this.user_host=this.authService.checkUserHospital(),this.form=new l.cw({Pregnancies:new l.NI(""),Glucose:new l.NI(""),BloodPressure:new l.NI(""),SkinThickness:new l.NI(""),Insulin:new l.NI(""),BMI:new l.NI(""),DiabetesPedigreeFunction:new l.NI(""),Age:new l.NI("")})}ngAfterViewInit(){var t=this;return(0,A.Z)(function*(){const i=yield t.localStorageService.getItem("status-diabetes-fbs");console.log("user_status_diabetes",i);const r=document.querySelector(".image-container");r&&("green"===i?r.style.backgroundColor="green":"yellow"===i?r.style.backgroundColor="yellow":"orange"===i?r.style.backgroundColor="orange":"red"===i&&(r.style.backgroundColor="red"))})()}get field(){return this.form.controls}onNumericCheck(){if(this.Pregnancies=this.field.Pregnancies.value?this.field.Pregnancies.value.toString():"",this.Glucose=this.field.Glucose.value?this.field.Glucose.value.toString():"",this.BloodPressure=this.field.BloodPressure.value?this.field.BloodPressure.value.toString():"",this.SkinThickness=this.field.SkinThickness.value?this.field.SkinThickness.value.toString():"",this.Insulin=this.field.Insulin.value?this.field.Insulin.value.toString():"",this.BMI=this.field.BMI.value?this.field.BMI.value.toString():"",this.DiabetesPedigreeFunction=this.field.DiabetesPedigreeFunction.value?this.field.DiabetesPedigreeFunction.value.toString():"",this.Age=this.field.Age.value?this.field.Age.value.toString():"",this.form.invalid)return console.log("lang_form","form error en"),void this.showToast(d.G.Warning,"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e1b\u0e49\u0e2d\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a\u0e16\u0e49\u0e27\u0e19\u0e01\u0e48\u0e2d\u0e19\u0e2a\u0e48\u0e07\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e43\u0e2b\u0e21\u0e48\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07");{console.log("form",this.form);const t=new E;return t.Pregnancies=Number(this.Pregnancies),t.Glucose=Number(this.Glucose),t.BloodPressure=Number(this.BloodPressure),t.SkinThickness=Number(this.SkinThickness),t.Insulin=Number(this.Insulin),t.BMI=Number(this.BMI),t.DiabetesPedigreeFunction=Number(this.DiabetesPedigreeFunction),t.Age=Number(this.Age),console.log("form",t),this.predictService.postPredictNumeric(t).subscribe(i=>{console.log("form",i),this.predict_display_numeric=i.prediction})}}checkNumericButton(){this.onNumericCheck()}showToast(t,i){switch(t){case d.G.Success:this.toastService.showSuccessToast("Success",i);break;case d.G.Warning:this.toastService.showWarningToast("Warning",i);break;case d.G.Error:this.toastService.showErrorToast("Error",i);break;default:this.toastService.showInfoToast("Info ",i)}}onFileSelected(t){const i=t.target.files[0];if(i){this.status="initial",this.file=i;const r=new FileReader;r.onload=p=>{this.imageUrl=p.target.result},r.readAsDataURL(this.file)}}uploadButton(){this.onUpload(this.file)}onUpload(t){console.log("file",t);var i=new FileReader;return i.addEventListener("load",t),i.readAsText(t),this.predictService.postClassifyImage(t).subscribe(r=>{console.log("predictService",r),this.predict_display=r.predicted_label})}toggleClass(t){this.isClassAdded[t]=!this.isClassAdded[t]}logout(){localStorage.removeItem(f.N.USERDATA_KEY),this.router.navigate(["home"])}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(_.k),e.Y36(k.e),e.Y36(a),e.Y36(c.F0),e.Y36(e.sBO),e.Y36(h.n))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-predict"]],decls:175,vars:16,consts:[[1,"breadcrumb-bar-two"],[1,"container"],[1,"row","align-items-center","inner-banner"],[1,"col-md-12","col-12","text-center"],[1,"breadcrumb-title"],["aria-label","breadcrumb",1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item"],[1,"content"],[1,"row"],[1,"col-md-5","col-lg-4","col-xl-3"],[1,"stickybar"],[1,"profile-sidebar"],[1,"widget-profile","pro-widget-content"],[1,"profile-info-widget"],["href","javascript:void(0)",1,"booking-doc-img"],[1,"image-container"],["src","assets/img/patients/user.png","alt","User Image"],[1,"profile-det-info"],[2,"color","rgb(83, 83, 83)"],[1,"patient-details"],[1,"dashboard-widget"],[1,"dashboard-menu"],[1,"fas","fa-columns"],[1,"fas","fa-bookmark"],[1,"fas","fa-users"],[1,"fas","fa-comments"],[1,"fas","fa-file-invoice-dollar"],[1,"fas","fa-list-alt"],[1,"active"],[3,"click"],[1,"fas","fa-sign-out-alt"],[1,"col-md-7","col-lg-8","col-xl-9"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"me-5"],[3,"opened","closed"],[1,"row","mb-5"],[1,"required","fs-5","fw-semibold","mb-2"],[1,"grid-container"],["src","../assets/diabetes/d1.png","alt","example_image","width","200","height","200"],["src","../assets/diabetes/d2.png","alt","example_image","width","200","height","200"],["src","../assets/diabetes/d3.png","alt","example_image","width","200","height","200"],[1,"col-md-12","fv-row"],["type","file",1,"file-input",3,"change"],["fileUpload",""],["alt","Uploaded Image",3,"src",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"indicator-label"],[3,"formGroup"],["for","reference",1,"fs-5","fw-semibold","mb-2"],["value","","type","text","name","Pregnancies","formControlName","Pregnancies","id","Pregnancies","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","Glucose","formControlName","Glucose","id","Glucose","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","BloodPressure","formControlName","BloodPressure","id","BloodPressure","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","SkinThickness","formControlName","SkinThickness","id","SkinThickness","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","Insulin","formControlName","Insulin","id","Insulin","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","BMI","formControlName","BMI","id","BMI","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","DiabetesPedigreeFunction","formControlName","DiabetesPedigreeFunction","id","DiabetesPedigreeFunction","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["value","","type","text","name","Age","formControlName","Age","id","Age","placeholder","\u0e23\u0e30\u0e1a\u0e38",1,"form-control","m-input","form-control-solid"],["alt","Uploaded Image",3,"src"],[1,"file-info"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5,"\u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19"),e.qZA(),e.TgZ(6,"nav",5)(7,"ol",6)(8,"li",7)(9,"a",8),e._uU(10,"\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e23\u0e01"),e.qZA()(),e.TgZ(11,"li",9),e._uU(12,"\u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19"),e.qZA()()()()()()(),e.TgZ(13,"div",10)(14,"div",1)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"a",17)(22,"div",18),e._UZ(23,"img",19),e.qZA()(),e.TgZ(24,"div",20)(25,"h3"),e._uU(26),e.qZA(),e.TgZ(27,"h5",21),e._uU(28),e.qZA(),e.TgZ(29,"h5",21),e._uU(30),e.qZA(),e._UZ(31,"div",22),e.qZA()()(),e.TgZ(32,"div",23)(33,"nav",24)(34,"ul")(35,"li")(36,"a",8),e._UZ(37,"i",25),e.TgZ(38,"span"),e._uU(39,"\u0e2a\u0e21\u0e38\u0e14\u0e1b\u0e23\u0e30\u0e08\u0e33\u0e15\u0e31\u0e27\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22"),e.qZA()()(),e.TgZ(40,"li")(41,"a",8),e._UZ(42,"i",26),e.TgZ(43,"span"),e._uU(44,"\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e19\u0e49\u0e33\u0e15\u0e32\u0e25"),e.qZA()()(),e.TgZ(45,"li")(46,"a",8),e._UZ(47,"i",27),e.TgZ(48,"span"),e._uU(49,"\u0e42\u0e20\u0e0a\u0e19\u0e32\u0e01\u0e32\u0e23\u0e02\u0e2d\u0e07\u0e09\u0e31\u0e19"),e.qZA()()(),e.TgZ(50,"li")(51,"a",8),e._UZ(52,"i",28),e.TgZ(53,"span"),e._uU(54,"\u0e41\u0e1c\u0e19\u0e14\u0e39\u0e41\u0e25\u0e15\u0e19\u0e40\u0e2d\u0e07"),e.qZA()()(),e.TgZ(55,"li")(56,"a",8),e._UZ(57,"i",29),e.TgZ(58,"span"),e._uU(59,"\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e17\u0e4c\u0e02\u0e2d\u0e07\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22"),e.qZA()()(),e.TgZ(60,"li")(61,"a",8),e._UZ(62,"i",30),e.TgZ(63,"span"),e._uU(64,"\u0e04\u0e33\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e17\u0e32\u0e07\u0e01\u0e32\u0e23\u0e41\u0e1e\u0e17\u0e22\u0e4c"),e.qZA()()(),e.TgZ(65,"li",31)(66,"a",8),e._UZ(67,"i",28),e.TgZ(68,"span"),e._uU(69,"\u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19"),e.qZA()()(),e.TgZ(70,"li")(71,"a",32),e.NdJ("click",function(){return r.logout()}),e._UZ(72,"i",33),e.TgZ(73,"span"),e._uU(74,"Logout"),e.qZA()()()()()()()()(),e.TgZ(75,"div",34)(76,"div",35)(77,"div",36)(78,"div")(79,"h2",37),e._uU(80," \u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19\u0e14\u0e49\u0e27\u0e22\u0e20\u0e32\u0e1e\u0e16\u0e48\u0e32\u0e22"),e.qZA()()(),e.TgZ(81,"mat-accordion")(82,"mat-expansion-panel",38),e.NdJ("opened",function(){return r.panelOpenState=!1})("closed",function(){return r.panelOpenState=!0}),e.TgZ(83,"mat-expansion-panel-header")(84,"mat-panel-title"),e._uU(85," \u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19 - \u0e20\u0e32\u0e1e\u0e16\u0e48\u0e32\u0e22 "),e.qZA(),e._UZ(86,"mat-panel-description"),e.qZA(),e.TgZ(87,"div",39)(88,"label",40),e._uU(89,"\u0e15\u0e31\u0e27\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e17\u0e35\u0e48\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e14\u0e49"),e.qZA(),e._UZ(90,"br"),e.TgZ(91,"div",41)(92,"span"),e._UZ(93,"img",42),e.qZA(),e.TgZ(94,"span"),e._UZ(95,"img",43),e.qZA(),e.TgZ(96,"span"),e._UZ(97,"img",44),e.qZA()(),e._UZ(98,"br")(99,"br")(100,"br")(101,"br")(102,"br"),e.qZA(),e.TgZ(103,"div",45)(104,"label",40),e._uU(105,"\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a Upload File"),e.qZA(),e._UZ(106,"br"),e.TgZ(107,"input",46,47),e.NdJ("change",function(D){return r.onFileSelected(D)}),e.qZA(),e.YNc(109,o,1,1,"img",48),e.YNc(110,g,10,3,"div",49),e.qZA(),e._UZ(111,"br")(112,"br")(113,"br"),e.TgZ(114,"button",50),e.NdJ("click",function(){return r.uploadButton()}),e.TgZ(115,"span",51),e._uU(116,"\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a"),e.qZA()(),e._UZ(117,"br")(118,"br")(119,"br"),e.YNc(120,Z,3,1,"div",49),e.qZA()()(),e.TgZ(121,"div",35)(122,"div",36)(123,"div")(124,"h2",37),e._uU(125," \u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19\u0e14\u0e49\u0e27\u0e22\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02"),e.qZA()()(),e.TgZ(126,"mat-accordion")(127,"mat-expansion-panel",38),e.NdJ("opened",function(){return r.panelOpenState=!1})("closed",function(){return r.panelOpenState=!0}),e.TgZ(128,"mat-expansion-panel-header")(129,"mat-panel-title"),e._uU(130," \u0e1e\u0e22\u0e32\u0e01\u0e23\u0e13\u0e4c\u0e40\u0e1a\u0e32\u0e2b\u0e27\u0e32\u0e19 - \u0e1c\u0e25\u0e15\u0e23\u0e27\u0e08 "),e.qZA(),e._UZ(131,"mat-panel-description"),e.qZA(),e.TgZ(132,"div",39)(133,"div",45)(134,"label",40),e._uU(135,"\u0e01\u0e23\u0e2d\u0e01\u0e1c\u0e25\u0e15\u0e23\u0e27\u0e08"),e.qZA(),e._UZ(136,"br"),e.TgZ(137,"form",52)(138,"div",39)(139,"div",45)(140,"label",53),e._uU(141," Pregnancies "),e.qZA(),e._UZ(142,"input",54),e.qZA(),e.TgZ(143,"div",45)(144,"label",53),e._uU(145," Glucose "),e.qZA(),e._UZ(146,"input",55),e.qZA(),e.TgZ(147,"div",45)(148,"label",53),e._uU(149," BloodPressure "),e.qZA(),e._UZ(150,"input",56),e.qZA(),e.TgZ(151,"div",45)(152,"label",53),e._uU(153," SkinThickness "),e.qZA(),e._UZ(154,"input",57),e.qZA(),e.TgZ(155,"div",45)(156,"label",53),e._uU(157," Insulin "),e.qZA(),e._UZ(158,"input",58),e.qZA(),e.TgZ(159,"div",45)(160,"label",53),e._uU(161," BMI "),e.qZA(),e._UZ(162,"input",59),e.qZA(),e.TgZ(163,"div",45)(164,"label",53),e._uU(165," DiabetesPedigreeFunction "),e.qZA(),e._UZ(166,"input",60),e.qZA(),e.TgZ(167,"div",45)(168,"label",53),e._uU(169," Age "),e.qZA(),e._UZ(170,"input",61),e.qZA()()()()(),e.TgZ(171,"button",50),e.NdJ("click",function(){return r.checkNumericButton()}),e.TgZ(172,"span",51),e._uU(173,"\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a"),e.qZA()(),e.YNc(174,N,3,1,"div",49),e.qZA()()()()()()()),2&i&&(e.xp6(9),e.Q6J("routerLink",r.routes.home),e.xp6(17),e.hij("\u0e0a\u0e37\u0e48\u0e2d : ",r.user_fullname,""),e.xp6(2),e.hij("\u0e2a\u0e16\u0e32\u0e19\u0e30 : ",r.user_status,""),e.xp6(2),e.hij("\u0e1c\u0e39\u0e49\u0e1b\u0e48\u0e27\u0e22\u0e42\u0e23\u0e07\u0e1e\u0e22\u0e32\u0e1a\u0e32\u0e25 : ",r.user_host,""),e.xp6(6),e.Q6J("routerLink",r.routes.patientDashboard),e.xp6(5),e.Q6J("routerLink",r.routes.patientDiabetes),e.xp6(5),e.Q6J("routerLink",r.routes.patientNutrition),e.xp6(5),e.Q6J("routerLink",r.routes.patientSelfcare),e.xp6(5),e.Q6J("routerLink",r.routes.patientHistory),e.xp6(5),e.Q6J("routerLink",r.routes.patientMedicalterm),e.xp6(5),e.Q6J("routerLink",r.routes.patientPredict),e.xp6(43),e.Q6J("ngIf",r.imageUrl),e.xp6(1),e.Q6J("ngIf",r.file),e.xp6(10),e.Q6J("ngIf",r.predict_display),e.xp6(17),e.Q6J("formGroup",r.form),e.xp6(37),e.Q6J("ngIf",r.predict_display_numeric))},dependencies:[m.O5,c.rH,u.pp,u.ib,u.yz,u.yK,u.u4,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],styles:[".image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:150px;height:150px;border-radius:50%}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}"]})}return n})()}];let w=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#u=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(L),c.Bz]})}return n})();var F=s(5683),j=s(8525),B=s(3843);let G=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#u=this.\u0275inj=e.cJS({imports:[m.ez,w,u.To,l.UX,B.Y,F.lN,j.LD,B.Y]})}return n})()},2956:(I,v,s)=>{s.d(v,{e:()=>P});var m=s(5619),c=s(2096),A=s(7398),U=s(4664),f=s(6306),l=s(4716),d=s(553);class E extends Error{}E.prototype.name="InvalidTokenError";var b=s(5879),S=s(9862);const T=`${d.N.apiUrl}/auth`;let C=(()=>{class a{constructor(u){this.http=u}login(u,o){return this.http.post(`${T}/login`,{username:u,password:o})}getUserByToken(u){const o=new S.WM({Authorization:`Bearer ${u}`});return this.http.get(`${T}/profile`,{headers:o})}static#e=this.\u0275fac=function(o){return new(o||a)(b.LFG(S.eN))};static#t=this.\u0275prov=b.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var y=s(4190);let P=(()=>{class a{get currentUserValue(){return this.currentUserSubject.value}set currentUserValue(u){this.currentUserSubject.next(u)}constructor(u,o){this.authHttpService=u,this.router=o,this.unsubscribe=[],this.authLocalStorageToken=`${d.N.USERDATA_KEY}`,this.isLoadingSubject=new m.X(!1),this.currentUserSubject=new m.X(void 0),this.currentUser$=this.currentUserSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable();const g=this.getUserByToken().subscribe();this.unsubscribe.push(g)}login(u,o){return this.isLoadingSubject.next(!0),this.authHttpService.login(u,o).pipe((0,A.U)(g=>{const Z=this.setAuthFromLocalStorage(g);return console.log("auth",g),console.log("login status",Z),Z}),(0,U.w)(()=>this.getUserByToken()),(0,f.K)(g=>(console.error("err",g),(0,c.of)(void 0))),(0,l.x)(()=>this.isLoadingSubject.next(!1)))}logout(){localStorage.removeItem(this.authLocalStorageToken),this.router.navigate(["/auth/login"],{queryParams:{}})}getUserByToken(){const u=this.getAuthFromLocalStorage();return u&&u.access_token?(this.isLoadingSubject.next(!0),this.authHttpService.getUserByToken(u.access_token).pipe((0,A.U)(o=>(o?this.currentUserSubject.next(o):this.logout(),o)),(0,l.x)(()=>this.isLoadingSubject.next(!1)))):(0,c.of)(void 0)}setAuthFromLocalStorage(u){return!(!u||!u.access_token||(localStorage.setItem(this.authLocalStorageToken,JSON.stringify(u)),0))}getAuthFromLocalStorage(){try{const u=localStorage.getItem(this.authLocalStorageToken);return u?JSON.parse(u):void 0}catch(u){return void console.error(u)}}checkUserUUID(){var o=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(o).user_uuid}checkUserFullName(){var o=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(o).username}checkUserStatusPatient(){var o=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(o).status_patient}checkUserHospital(){var o=this.getAuthFromLocalStorage()?.access_token;return this.getDecodedAccessToken(o).hospital_name}getDecodedAccessToken(u){try{return function k(a,h){if("string"!=typeof a)throw new E("Invalid token specified: must be a string");h||(h={});const u=!0===h.header?0:1,o=a.split(".")[u];if("string"!=typeof o)throw new E(`Invalid token specified: missing part #${u+1}`);let g;try{g=function _(a){let h=a.replace(/-/g,"+").replace(/_/g,"/");switch(h.length%4){case 0:break;case 2:h+="==";break;case 3:h+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function e(a){return decodeURIComponent(atob(a).replace(/(.)/g,(h,u)=>{let o=u.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}(h)}catch{return atob(h)}}(o)}catch(Z){throw new E(`Invalid token specified: invalid base64 for part #${u+1} (${Z.message})`)}try{return JSON.parse(g)}catch(Z){throw new E(`Invalid token specified: invalid json for part #${u+1} (${Z.message})`)}}(u)}catch{return null}}ngOnDestroy(){this.unsubscribe.forEach(u=>u.unsubscribe())}static#e=this.\u0275fac=function(o){return new(o||a)(b.LFG(C),b.LFG(y.F0))};static#t=this.\u0275prov=b.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},3807:(I,v,s)=>{s.d(v,{G:()=>m});var m=function(c){return c.Success="success",c.Info="info",c.Warning="warning",c.Error="error",c}(m||{})},8610:(I,v,s)=>{s.d(v,{k:()=>U});var m=s(8645),c=s(3807),A=s(5879);let U=(()=>{class f{constructor(){this._toastEvents=new m.x,this.toastEvents=this._toastEvents.asObservable()}showSuccessToast(d,E){this._toastEvents.next({message:E,title:d,type:c.G.Success})}showInfoToast(d,E){this._toastEvents.next({message:E,title:d,type:c.G.Info})}showWarningToast(d,E){this._toastEvents.next({message:E,title:d,type:c.G.Warning})}showErrorToast(d,E){this._toastEvents.next({message:E,title:d,type:c.G.Error})}static#e=this.\u0275fac=function(E){return new(E||f)};static#t=this.\u0275prov=A.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()}}]);